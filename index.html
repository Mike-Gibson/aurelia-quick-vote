<!doctype html>
<html>
  <head>
    <title>Quick Vote</title>
    <link rel="stylesheet" type="text/css" href="jspm_packages/npm/font-awesome@4.3.0/css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="styles/styles.css">
    <meta name="viewport" content="width=device-width, initial-scale=1">
  </head>
  <body aurelia-app="animation-main">
    <div class="splash">
      <div class="message">Quick Vote</div>
      <i class="fa fa-spinner fa-spin"></i>
    </div>

    <script src="jspm_packages/system.js"></script>
    <script src="config.js"></script>
    
    <!-- TODO: Use system.js? -->
    <script src="jspm_packages/github/components/jquery@2.1.4/jquery.min.js"></script>
    <script src="src/CLient/Vendor/jquery.signalR.min.js"></script>
    
    <script>
      System.import('aurelia-bootstrapper');
    </script>
    
    
    <script>
        $(function () {
            
            //var connection = $.hubConnection();
            var connection = $.hubConnection("http://localhost:9001/signalr", { useDefaultPath: false });
            var hubProxy = connection.createHubProxy('voting');
            
            hubProxy.on('userLoggedIn', function(userName, message) {
                console.log(userName + ' ' + message);
            });
            
            connection.start()
                .done(function(){ alert('Now connected, connection ID=' + connection.id); })
                .fail(function(){ alert('Could not connect'); });
            
        });
    </script>
    
  </body>
</html>
